<section class="content">
  <div class="row">
    <div class="col-xs-12">
      <div class="box box-main">
        <div class="box-header">
          <h2 class="box-title">
            Listing Loads
            <small><%= link_to 'New Loads', new_load_path, class: 'btn btn-primary btn-xs'%></small>
          </h2>
        </div><!-- /.box-header -->
        <div class="box-body" id="loads-div">
          <table class="table table-striped table-bordered table-advance table-hover">
            <thead>
              <tr>
                <th>Origin</th>
                <th>Destination</th>
                <th>PickUp Date</th>
                <th>Delivery Date</th>
                <th>Equipment</th>
                <th>Full/Partial</th>
                <th>Weight</th>
                <th>Price</th>
                <th>Phone</th>
              </tr>
            </thead>

            <tbody>
                <tr v-for="load in loads">
                  <td>{{ load.origin }}</td>
                  <td>{{ load.destination }}</td>
                  <td>{{ load.pick_up_at }} </td>
                  <td>{{ load.delivery_at }}</td>
                  <td>{{ load.equipment_type }}</td>
                  <td>{{ load.load_type }}</td>
                  <td>{{ load.weight }}</td>
                  <td>{{ load.price }}</td>
                  <td>{{ load.tel }}</td>
                </tr>
            </tbody>
          </table>
        </div><!-- /.box-body -->
      </div><!-- /.box -->
    </div><!-- /.col -->
  </div><!-- /.row -->
</section><!-- /.content -->
<script type="text/javascript">
  $(document).on('ready page:change', function() {
    var load_table = new Vue({
        el: '#loads-div',
        data: {
            loads: []
        },
        beforeCreate: function(){
          this.$http.get('loads.json').then(function(response){
              console.log(JSON.stringify(response.data));
              this.loads = response.data;
          }, function(response){
              console.log("fail");
              console.log(JSON.stringify(response));
          });
        }
    });
  });

  Vue.component('load-row', {
    template: '#load-row',
    props: {
      load: Object
    }
  });
</script>
<script type="text/x-template" id="load-row">
  <tr>
    <td>{{ load.origin }}</td>
    <td>{{ load.destination }}</td>
    <td>{{ load.pick_up_at }} </td>
    <td>{{ load.delivery_at }}</td>
    <td>{{ load.equipment_type) }}</td>
    <td>{{ load.load_type) }}</td>
    <td>{{ load.weight }}</td>
    <td>{{ load.price }}</td>
    <td>{{ load.tel }}</td>
  </tr>
</script>
